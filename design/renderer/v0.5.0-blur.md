# v0.5.0 blur 설계

## 목표
- 조리개(aperture) 기반 defocus blur를 적용한 카메라를 도입한다.
- 셔터 시간 구간을 샘플링해 moving sphere의 motion blur를 표현한다.
- 모든 난수는 단일 시드를 공유해 결정성을 유지한다.

## 카메라 설계
- 입력 파라미터
  - 시점: (3, 3, 2), 목표: (0, 0, -1), vup: (0, 1, 0)
  - 수직 FOV: 20도, 조리개: 0.2, 포커스 거리: |lookfrom - lookat|
  - 셔터 오픈/클로즈: [0.0, 1.0)
- 기저/뷰포트 계산
  - w = Unit(lookfrom - lookat), u = Unit(cross(vup, w)), v = cross(w, u)
  - viewport_height = 2 * tan(FOV/2), viewport_width = aspect * viewport_height
  - horizontal = focus_dist * viewport_width * u, vertical = focus_dist * viewport_height * v
  - lower_left = origin - horizontal/2 - vertical/2 - focus_dist * w
- 레이 생성
  - rd = lens_radius * RandomInUnitDisk(generator)
  - offset = u * rd.x + v * rd.y
  - time = RandomDouble(generator, time0, time1)
  - Ray(origin + offset, lower_left + s*horizontal + t*vertical - origin - offset, time)
- 산란 레이는 입력 레이의 시간 값을 보존한다.

## Moving sphere 설계
- 입력: center_start, center_end, time_start, time_end, radius, material
- center(time) = center_start + ((time - time_start)/(time_end - time_start)) * (center_end - center_start)
- Hit 시 r.time()을 사용해 중심을 계산한 뒤 기존 구 교차 공식을 그대로 적용한다.

## 장면 구성
- Ground: 고정 구(중심 (0, -100.5, -1), 반지름 100, 노란 Lambertian)
- Center: MovingSphere((0,0,-1) → (0,-0.25,-1), radius 0.5, 파란 Lambertian)
- Left: 고정 유리 구(center (-1,0,-1), radius 0.5)
- Right: 고정 Metal 구(center (1,0,-1), radius 0.5, fuzz 0)

## 결정성/랜덤
- std::mt19937 + uniform_real_distribution(0,1) 기반 RandomDouble로 모든 난수 사용
- 샘플 순서: 픽셀 좌표 난수 → 카메라 렌즈/시간 → rayColor 내 산란
- 동일 시드 입력 시 PPM 문자열 완전 일치

## 테스트 메모
- 단위: MovingSphere가 레이 시간에 따라 다른 중심을 사용하는지 hit 결과로 역산해 검증
- 통합: 고정 seed로 작은 이미지를 렌더해 PPM 문자열을 스냅샷 비교
