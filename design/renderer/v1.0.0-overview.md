# v1.0.0 렌더러 개요

## 목표
- Cosine/Sphere/Hittable/Mixture PDF와 ONB를 도입해 코사인/광원 직접 샘플링을 결합한다.
- Lambertian/Isotropic 분산을 PDF 기반으로 추적하고 금속/유리 재질은 정반사/굴절만 담당하도록 산란 경로를 분리한다.
- Cornell smoke 장면을 유지하되 천장 광원에 대한 직접 샘플링을 혼합해 분산을 줄인다.

## 핵심 변경
- `raytracer/onb.hpp`: 직교 정규 기저를 구성해 Cosine PDF와 구 표면 샘플링의 기준 좌표를 제공한다.
- `raytracer/pdf.hpp`: Cosine/Sphere/Hittable/UniformSphere/Mixture PDF를 추가해 법선 기반, 구 표적, 히터블 집합, 균일 구, 혼합 샘플링을 지원한다.
- `raytracer/material.hpp`: `ScatterRecord`(PDF/스펙큘러 구분/감쇠)와 `ScatteringPdf`를 추가해 확산 재질이 코사인 PDF를 보고하도록 변경했다. 금속/유리는 is_specular 경로로만 추적한다.
- `raytracer/hittable*.{hpp,cpp}`: Quad/Sphere/HittableList에 `PdfValue`/`Random`을 구현해 광원 샘플링에 사용한다.
- `src/ppm.cpp`: `RayColor`가 재질 PDF와 `HittablePdf`(천장 광원)를 `MixturePdf(0.5/0.5)`로 결합해 새로운 레이를 생성한다. 광원은 Cornell Box 천장 Quad만 `lights` 리스트로 수집해 직접 샘플링에 사용한다.

## 결정성 및 RNG
- 단일 `std::mt19937` 시퀀스를 픽셀 지터 → 카메라 → rayColor 재귀(PDF 선택/샘플 방향/재질 난수) 순으로 소비한다.
- Isotropic 위상 함수는 균일 구 PDF(`UniformSpherePdf`)와 `1/(4pi)` 산란 PDF를 사용해 volumetric 산란 결정성을 유지한다.

## 테스트
- 단위: `tests/unit/pdf_test.cpp`에서 Cosine/Quad/Mixture PDF의 Value/Generate 특성을 검증한다. 기존 재질/기하 테스트는 ScatterRecord 기반으로 업데이트했다.
- 통합: `tests/integration/ppm_integration_test.cpp`의 4x4 Cornell mini 렌더를 고정 시드로 비교하고 동일 시드 반복 렌더링 일관성을 확인한다.

## 알림
- 모든 샘플은 광원 PDF와 재질 PDF를 동일 가중으로 혼합한다. 광원이 비어 있을 경우 재질 PDF 단독으로 동작한다.
- 코드는 여전히 단일 스레드/ASCII PPM 출력만 지원하며 바이너리 산출물 커밋은 금지다.
